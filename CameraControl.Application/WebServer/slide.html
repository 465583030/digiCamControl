<div class="submenu">
  <button id="prev2">Prev. Image</button>
  <button id="playpause">Pause</button>
  <button id="next2">Next. Image</button>
  <button id="like">Like</button>
  <button id="unlike">Unlike</button>
</div>
<div class="content" id="slideshowimages" style="margin: 0 auto;"></div>
<script>
$(function(){
	var playing = false;
	$(".submenu button:first").button({
		icons: {
		primary: "ui-icon-carat-1-w"
	  },
		text: true
	  }).next().button({
		icons: {
		primary: "ui-icon-pause"
	  },
		text: true
	  }).next().button({
		icons: {
		primary: "ui-icon-carat-1-e"
	  },
		text: true
	  }).next().button({
		icons: {
		primary: "ui-icon-heart"
	  },
		text: true
	  }).next().button({
		icons: {
		primary: "ui-icon-cancel"
	  },
		text: true
	});
	$("#like").click(function(){
		var image=$("#slideshowimages .centered").filter(":visible").attr("src").split("/");
		if (image[3]!="") {
			$.ajax({
			  method: "GET",
			  url: "/?CMD=Like_Image&Param="+image[3]
			});
		}
	});
	$("#unlike").click(function(){
		var image=$("#slideshowimages .centered").filter(":visible").attr("src").split("/");
		if (image[3]!="") {
			$.ajax({
			  method: "GET",
			  url: "/?CMD=Unlike_Image&Param="+image[3]
			});
		}
	});
    $.ajax({
      method: "GET",
	  dataType: "json",
      url: "/session.json",
	  success: function(data){
		for (i=0;i<data.Files.length;i++) {
			$("#slideshowimages").append('<img src="/thumb/large/'+data.Files[i].Name+'" class="centered" style="margin:0 auto"/>');
		}
		$("#slideshowimages").cycle({
			fx: "fade",
			speed: "fast",
			timeout: 3000,  
			prev:   '#prev2',
			next:   '#next2'
		});
		playing = true;
		$(window).trigger('resize');
		var w = $(".centered:first").width();
		$("#slideshowimages").css({width: w});
	  }
    });
	$("#playpause").click(function(){
		var obj = $(this);
		var now = obj.find(".ui-button-text").html();
		if (now=="Pause") {
			playing=false;
			obj.find(".ui-button-text").html("Play");
			obj.find(".ui-button-icon-primary").removeClass("ui-icon-pause").addClass("ui-icon-play");
			$("#slideshowimages").cycle("pause");
		}else{
			playing=true;
			obj.find(".ui-button-text").html("Pause");
			$("#slideshowimages").cycle("resume");
			obj.find(".ui-button-icon-primary").removeClass("ui-icon-play").addClass("ui-icon-pause");
		}
	});
});
</script>
